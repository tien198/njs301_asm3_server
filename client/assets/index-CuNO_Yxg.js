import{f as h,j as s,E as u,G as d,H as w,M as y,h as f,x as r,I as g,p as C,F as I,J as T,C as p,K as k,b as S,r as j,Q as v,d as z,R as L,L as N,S as A,T as Q,u as R,U as q}from"./index-CzJI12k5.js";import{Q as D}from"./QuantityInput-CQbXk1tc.js";import{D as E}from"./DarkButton-qwoCnYdn.js";import{T as V,c as i}from"./CartLayout.module-CdKOYeZy.js";function b({item:t}){const e=h(),c=o=>{e(u({item:t,quantity:+o.target.value}))},a=()=>e(u({item:t,quantity:+t.quantity+1})),l=()=>e(u({item:t,quantity:+t.quantity-1}));return s.jsx(D,{val:t.quantity,onChangeVal:c,increment:a,decrement:l})}function F({removeAction:t}){const{items:e,currentItemIndex:c}=d(({cart:n})=>n),a=e[c]||{},l=w(),o=n=>{t(n),l()};return s.jsx(y,{children:s.jsxs("div",{className:"py-4 px-3 grid grid-cols-5 justify-between items-center gap-4 italic",children:[s.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Image"}),s.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:s.jsx("img",{src:a.img1,alt:a.name,className:"mx-auto w-28 md:w-32"})}),s.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Product"}),s.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:a.name}),s.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Price"}),s.jsxs("span",{className:"overflow-hidden col-start-3 -col-end-1",children:[f(a.price)," VNĐ"]}),s.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Quantity"}),s.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:s.jsx(b,{item:a})}),s.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Total"}),s.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:f(Number(a.lineTotal))}),s.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Remove"}),s.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:s.jsx("button",{onClick:()=>o(a),children:s.jsx(r,{icon:g,className:"text-zinc-400"})})})]})})}function M({index:t,item:e,showModal:c,removeAction:a}){var l;return s.jsxs("tr",{children:[s.jsx("td",{onClick:()=>c(t),className:"hover:cursor-pointer py-4",children:s.jsx("img",{src:e.img1,alt:e.name,className:"mx-auto md:w-48"})}),s.jsx("td",{onClick:()=>c(t),className:"hover:cursor-pointer",children:e.name}),s.jsxs("td",{className:"hidden md:table-cell text-zinc-500",children:[(l=e.price)==null?void 0:l.toLocaleString()," VNĐ"]}),s.jsx("td",{children:s.jsx(b,{item:e})}),s.jsxs("td",{className:"text-zinc-500",children:[e.lineTotal.toLocaleString()," VNĐ"]}),s.jsx("td",{className:"hidden md:table-cell",children:s.jsx("button",{onClick:()=>a(e),children:s.jsx(r,{icon:g,className:"text-zinc-400"})})})]},e.productId)}function P({className:t}){const e=d(n=>n.cart.items),c=C(),a=h(),l=n=>{a(T(n.productId||"")),c(null,{method:"delete",action:p.Cart+"/"+n.productId,encType:"application/json"})};function o(n){a(k(n)),a(S("product"))}return s.jsxs(s.Fragment,{children:[s.jsx(F,{removeAction:l}),s.jsxs("table",{className:`text-center ${t} `,children:[s.jsx("thead",{className:"p-4",children:s.jsxs("tr",{className:" uppercase bg-zinc-50",children:[s.jsx("th",{className:"p-4 font-light",children:"Image"}),s.jsx("th",{className:"font-light",children:"Product"}),s.jsx("th",{className:"font-light hidden md:table-cell",children:"Price"}),s.jsx("th",{className:"font-light",children:"Quantity"}),s.jsx("th",{className:"font-light",children:"Total"}),s.jsx("th",{className:"font-light hidden md:table-cell",children:"Remove"})]})}),s.jsx("tbody",{children:e?e.map((n,m)=>s.jsx(M,{item:n,index:m,showModal:o,removeAction:l},n.productId)):s.jsx(I,{})})]})]})}function H({className:t}){const e=d(x=>x.cartTotal.total),c=d(x=>x.cart.items),a=h();j.useEffect(()=>{a(v(c))},[c]);const[l,o]=z(),[n,m]=j.useState("h-0");return s.jsxs(V,{className:t,children:[s.jsx("h4",{className:"text-2xl",children:"Cart total"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h6",{children:"Subtotal"}),s.jsxs("span",{className:"text-sm text-zinc-500",children:[e.toLocaleString()," VND"]})]}),s.jsx("hr",{className:"my-2 bg-zinc-500"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h6",{className:"text-",children:"Total"}),s.jsxs("span",{children:[e.toLocaleString()," VND"]})]})]}),s.jsxs("div",{children:[s.jsx("input",{type:"text",placeholder:"Enter your coupon",className:"w-full border p-3",value:l,onChange:o}),s.jsx("div",{className:`overflow-hidden text-sm m-2 duration-150 ${n}`,children:"Your coupon was applyed"}),s.jsxs(E,{onClick:()=>m("h-10"),className:"w-full py-3 bg-zinc-900 text-white capitalize italic ",children:[s.jsx(r,{icon:L,className:"mr-4"}),"Apply coupon"]})]})]})}function $({className:t}){return s.jsxs("div",{className:`bg-zinc-50 text-zinc-500 italic p-5 flex justify-between ${t}`,children:[s.jsxs(N,{to:p.Shop,children:[s.jsx(r,{icon:A,className:"text-black mr-4"}),"Continue Shopping"]}),s.jsxs(N,{to:p.Checkout,className:"border border-black px-6 py-2",children:["Process to checkout",s.jsx(r,{icon:Q,className:"text-black ml-4"})]})]})}function U(){const{cart:t}=R(),e=h();return j.useEffect(()=>{t&&t.then(c=>{c&&(e(q(c)),e(v(c)))})},[]),s.jsxs("div",{className:i["cart-layout"],children:[s.jsx(P,{className:i.cart}),s.jsx(H,{className:i.total}),s.jsx($,{className:i.rest})]})}export{U as default};
