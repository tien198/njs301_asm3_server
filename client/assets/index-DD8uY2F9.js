import{d as x,j as e,E as u,G as m,H as y,M as b,f as N,v as i,I as g,n as C,J as I,C as p,K as T,Q as k,r as j,R as v,b as S,S as z,L as f,T as L,U as A,u as Q,V}from"./index-BqrMT8t0.js";import{Q as q}from"./QuantityInput-DXPAQF6r.js";import{D}from"./DarkButton-BvmGOnYq.js";import{T as E,c as h}from"./CartLayout.module-CuRq5vL7.js";function w({item:t}){const c=x(),n=o=>{c(u({item:t,quantity:+o.target.value}))},a=()=>c(u({item:t,quantity:+t.quantity+1})),l=()=>c(u({item:t,quantity:+t.quantity-1}));return e.jsx(q,{val:t.quantity,onChangeVal:n,increment:a,decrement:l})}function M({removeAction:t}){const{items:c,currentItemIndex:n}=m(({cart:s})=>s),a=c[n]||{},l=y(),o=s=>{t(s),l()};return e.jsx(b,{children:e.jsxs("div",{className:"py-4 px-3 grid grid-cols-5 justify-between items-center gap-4 italic",children:[e.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Image"}),e.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:e.jsx("img",{src:a.img1,alt:a.name,className:"mx-auto w-28 md:w-32"})}),e.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Product"}),e.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:a.name}),e.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Price"}),e.jsxs("span",{className:"overflow-hidden col-start-3 -col-end-1",children:[N(a.price)," VNĐ"]}),e.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Quantity"}),e.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:e.jsx(w,{item:a})}),e.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Total"}),e.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:N(Number(a.lineTotal))}),e.jsx("span",{className:"overflow-hidden col-start-1 col-end-3 uppercase",children:"Remove"}),e.jsx("span",{className:"overflow-hidden col-start-3 -col-end-1",children:e.jsx("button",{onClick:()=>o(a),children:e.jsx(i,{icon:g,className:"text-zinc-400"})})})]})})}function R({className:t}){const c=m(({cart:s})=>s.items),n=C(),a=x(),l=s=>{a(I(s.productId||"")),n(null,{method:"delete",action:p.Cart+"/"+s.productId,encType:"application/json"})};function o(s){a(T(s)),a(k())}return e.jsxs(e.Fragment,{children:[e.jsx(M,{removeAction:l}),e.jsxs("table",{className:`text-center ${t} `,children:[e.jsx("thead",{className:"p-4",children:e.jsxs("tr",{className:" uppercase bg-zinc-50",children:[e.jsx("th",{className:"p-4 font-light",children:"Image"}),e.jsx("th",{className:"font-light",children:"Product"}),e.jsx("th",{className:"font-light hidden md:table-cell",children:"Price"}),e.jsx("th",{className:"font-light",children:"Quantity"}),e.jsx("th",{className:"font-light",children:"Total"}),e.jsx("th",{className:"font-light hidden md:table-cell",children:"Remove"})]})}),e.jsx("tbody",{children:c.map((s,d)=>{var r;return e.jsxs("tr",{children:[e.jsx("td",{onClick:()=>o(d),className:"hover:cursor-pointer py-4",children:e.jsx("img",{src:s.img1,alt:s.name,className:"mx-auto md:w-48"})}),e.jsx("td",{onClick:()=>o(d),className:"hover:cursor-pointer",children:s.name}),e.jsxs("td",{className:"hidden md:table-cell text-zinc-500",children:[(r=s.price)==null?void 0:r.toLocaleString()," VNĐ"]}),e.jsx("td",{children:e.jsx(w,{item:s})}),e.jsxs("td",{className:"text-zinc-500",children:[s.lineTotal.toLocaleString()," VNĐ"]}),e.jsx("td",{className:"hidden md:table-cell",children:e.jsx("button",{onClick:()=>l(s),children:e.jsx(i,{icon:g,className:"text-zinc-400"})})})]},s.productId)})})]})]})}function P({className:t}){const c=m(r=>r.cartTotal.total),n=m(r=>r.cart.items),a=x();j.useEffect(()=>{a(v(n))},[n]);const[l,o]=S(),[s,d]=j.useState("h-0");return e.jsxs(E,{className:t,children:[e.jsx("h4",{className:"text-2xl",children:"Cart total"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h6",{children:"Subtotal"}),e.jsxs("span",{className:"text-sm text-zinc-500",children:[c.toLocaleString()," VND"]})]}),e.jsx("hr",{className:"my-2 bg-zinc-500"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h6",{className:"text-",children:"Total"}),e.jsxs("span",{children:[c.toLocaleString()," VND"]})]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Enter your coupon",className:"w-full border p-3",value:l,onChange:o}),e.jsx("div",{className:`overflow-hidden text-sm m-2 duration-150 ${s}`,children:"Your coupon was applyed"}),e.jsxs(D,{onClick:()=>d("h-10"),className:"w-full py-3 bg-zinc-900 text-white capitalize italic ",children:[e.jsx(i,{icon:z,className:"mr-4"}),"Apply coupon"]})]})]})}function H({className:t}){return e.jsxs("div",{className:`bg-zinc-50 text-zinc-500 italic p-5 flex justify-between ${t}`,children:[e.jsxs(f,{to:p.Shop,children:[e.jsx(i,{icon:L,className:"text-black mr-4"}),"Continue Shopping"]}),e.jsxs(f,{to:p.Checkout,className:"border border-black px-6 py-2",children:["Process to checkout",e.jsx(i,{icon:A,className:"text-black ml-4"})]})]})}function J(){const{cart:t}=Q(),c=x();return j.useEffect(()=>{t&&t.then(n=>{n&&(c(V(n)),c(v(n)))})},[t]),e.jsxs("div",{className:h["cart-layout"],children:[e.jsx(R,{className:h.cart}),e.jsx(P,{className:h.total}),e.jsx(H,{className:h.rest})]})}export{J as default};
