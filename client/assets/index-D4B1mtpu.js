import{u as m,r as n,j as e,A as o,F as r,a as N,b as S,c as y,d as b,e as C,C as P,f as k,P as A,g as I,h as j,i as D,k as w,l as R,m as T}from"./index-BqrMT8t0.js";import{Q as z}from"./QuantityInput-DXPAQF6r.js";import{D as E}from"./DarkButton-BvmGOnYq.js";import{g as B}from"./getDefer-D-PQy0Qb.js";import{S as Q}from"./serverAPIs-C1khi3Tm.js";function d({imgSrc:s,imgAlt:a,onHandleThumbnail:t}){return e.jsx("img",{src:s,alt:a,onClick:t==null?void 0:t.bind(null,[s]),className:"cursor-pointer h-16 md:h-14 lg:h-16 2xl:h-24 object-cover fade-in"})}function V({product:s,onHandleThumbnail:a}){return e.jsxs("div",{className:"flex flex-col gap-2 h-full",children:[s.img1&&e.jsx(d,{imgSrc:s.img1,imgAlt:s.name,onHandleThumbnail:a}),s.img2&&e.jsx(d,{imgSrc:s.img2,imgAlt:s.name,onHandleThumbnail:a}),s.img3&&e.jsx(d,{imgSrc:s.img3,imgAlt:s.name,onHandleThumbnail:a}),s.img4&&e.jsx(d,{imgSrc:s.img4,imgAlt:s.name,onHandleThumbnail:a})]})}function W({currentImg:s,setCurrentImg:a}){const t=N();return n.useEffect(()=>{t&&t.img1&&a(t.img1)},[t]),e.jsx("img",{src:s,alt:t==null?void 0:t.name,className:"h-full w-full object-cover fade-in"})}function _({className:s}){const{product:a}=m(),[t,c]=n.useState("");return e.jsxs("div",{className:`${s} grid grid-cols-4 gap-4`,children:[e.jsx("div",{className:"col-start-1 col-end-2",children:e.jsx(n.Suspense,{fallback:e.jsx(r,{}),children:e.jsx(o,{resolve:a,children:l=>l?e.jsx(V,{product:l,onHandleThumbnail:c}):e.jsx(r,{})})})}),e.jsx("div",{className:"col-start-2 col-end-5",children:e.jsx(n.Suspense,{fallback:e.jsx(r,{}),children:e.jsx(o,{resolve:a,children:e.jsx(W,{currentImg:t,setCurrentImg:c})})})})]})}function $({product:s}){const[a,t,c]=S(1),l=()=>c(u=>++u),i=()=>c(u=>--u),x=y(),g=b(),v=()=>{g(C({item:s,quantity:a})),x.submit({productId:s.id,quantity:a},{method:"post",action:P.Cart,encType:"application/json"})};return e.jsx("div",{className:"flex fade-in",children:e.jsxs("div",{className:"flex gap-4 items-center border border-zinc-950",children:[e.jsx("span",{className:"px-4 py-2 uppercase",children:"Quantity"}),e.jsx(z,{val:a,onChangeVal:t,increment:l,decrement:i}),e.jsx(E,{onClick:v,className:"px-8 py-2 capitalize italic ",children:"Add to cart"})]})})}function f({product:s,className:a,isFallback:t=!1}){return e.jsxs("div",{className:`${a} flex flex-col gap-4 h-full justify-between left-in`,children:[e.jsx("h1",{className:"uppercase text-black text-3xl 2xl:text-5xl",children:t?e.jsx(r,{}):s.name}),e.jsx("span",{className:"text-xl",children:t?e.jsx(r,{}):k(s.price)+" VNĐ"}),e.jsx("p",{children:t?e.jsx(r,{}):s.short_desc}),e.jsxs("p",{children:[e.jsx("span",{className:"uppercase text-black mr-2",children:"Category:"}),t?e.jsx(r,{}):s.category]}),e.jsx("div",{children:e.jsx($,{product:s})})]})}function q({className:s}){const{product:a}=m();return e.jsx(n.Suspense,{fallback:e.jsx(f,{className:s,isFallback:!0}),children:e.jsx(o,{resolve:a,children:t=>t?e.jsx(f,{product:t,className:s}):e.jsx("p",{children:"Product not found"})})})}function p({product:s,className:a,isFallback:t=!1}){var l;const c=((l=s==null?void 0:s.long_desc)==null?void 0:l.split(`
`))||new Array("","","");return e.jsxs("div",{className:`${a} flex flex-col gap-4 2xl:gap-6 left-in`,children:[e.jsx("div",{children:e.jsx("span",{className:"inline-block bg-zinc-900 text-white px-5 py-3 uppercase",children:"Description"})}),e.jsx("h3",{className:"uppercase text-black text-xl 2xl:text-2xl",children:"Product Description"}),e.jsx("article",{className:"flex flex-col gap-1 2xl:gap-2",children:c==null?void 0:c.map((i,x)=>e.jsx("p",{className:x===0?"uppercase mb-1":"",children:t?e.jsx(r,{}):i},x))})]})}function F({className:s}){const{product:a}=m();return e.jsx(n.Suspense,{fallback:e.jsx(p,{className:s,isFallback:!0}),children:e.jsx(o,{resolve:a,children:t=>t?e.jsx(p,{product:t,className:s}):e.jsx("p",{children:"Product not found"})})})}function h({product:s,className:a,isFallback:t=!1}){const[c,l]=n.useState();return!t&&n.useEffect(()=>{(async function(){const i=await B({url:Q.findByCategory+s.category,includeCookie:!0});l(i||[])})()},[s]),e.jsxs("div",{className:a,children:[e.jsx(A,{}),e.jsx("h4",{className:"text-2xl uppercase mb-6",children:"Related Products"}),e.jsxs(I,{children:[t&&e.jsx(j,{}),t||!c&&e.jsx(j,{}),c==null?void 0:c.map(i=>e.jsx(D,{product:i},i.id))]}),!t&&(c==null?void 0:c.length)===0&&e.jsx("div",{className:"bg-zinc-200 py-10 text-center animate-pulse",children:"Any related product found!"})]})}function L({className:s}){const{product:a}=m();return e.jsx(n.Suspense,{fallback:e.jsx(h,{className:s,isFallback:!0}),children:e.jsx(o,{resolve:a,children:t=>t?e.jsx(h,{product:t,className:s}):e.jsx("p",{children:"Product not found"})})})}function M(){const s=w().state;n.useEffect(()=>{s==="idle"&&scrollTo({top:0,left:0,behavior:"smooth"})},[s])}function X(){return R(),M(),e.jsx(T,{className:"italic text-zinc-500 text-xs xl:text-sm 2xl:text-xl",children:e.jsxs("div",{className:"grid md:grid-cols-5 gap-4 2xl:gap-10 w-full",children:[e.jsx(_,{className:"md:col-start-1 md:col-end-3"}),e.jsx(q,{className:"md:col-start-3 md:col-end-6"}),e.jsx(F,{className:"mt-8 md:col-start-1 md:col-end-6"}),e.jsx(L,{className:"mt-8 mb-32 md:col-start-1 md:col-end-6"})]})})}export{X as default};
